<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Opinian - Where Words Find Their Voice</title>
    
    <!-- Google Fonts for 1920s/1940s typography -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Source+Sans+Pro:wght@300;400;600&display=swap" rel="stylesheet">
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Docx.js for Word document export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/docx/8.5.0/docx.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    
    <style>
        /* ===== 1920s FLAPPER + 1940s NOIR AESTHETIC ===== */
        :root {
            /* 1920s Art Deco Colors */
            --art-gold: #D4AF37;
            --champagne: #F7E7CE;
            --deep-charcoal: #36454F;
            --ivory: #FFFFF0;
            --bronze: #CD7F32;
            
            /* 1940s Noir Colors */
            --noir-black: #0A0A0A;
            --smoke-gray: #696969;
            --silver-screen: #C0C0C0;
            --vintage-cream: #F5F5DC;
            --shadow-blue: #4682B4;
            
            /* Typography */
            --font-display: 'Playfair Display', serif;
            --font-body: 'Source Sans Pro', sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            background: linear-gradient(135deg, var(--noir-black) 0%, var(--deep-charcoal) 50%, var(--smoke-gray) 100%);
            min-height: 100vh;
            color: var(--ivory);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* ===== ART DECO PATTERNS & NOIR ELEMENTS ===== */
        .art-deco-border {
            position: relative;
            border: 2px solid var(--art-gold);
            border-radius: 0;
        }

        .art-deco-border::before,
        .art-deco-border::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            border: 2px solid var(--bronze);
            transform: rotate(45deg);
        }

        .art-deco-border::before {
            top: -10px;
            left: -10px;
            border-right: none;
            border-bottom: none;
        }

        .art-deco-border::after {
            bottom: -10px;
            right: -10px;
            border-left: none;
            border-top: none;
        }

        .noir-shadow {
            box-shadow: 
                0 10px 30px rgba(0, 0, 0, 0.7),
                inset 0 1px 0 rgba(212, 175, 55, 0.3);
        }

        /* ===== NAVIGATION - 1920s ELEGANCE ===== */
        .main-nav {
            background: linear-gradient(90deg, var(--noir-black) 0%, var(--deep-charcoal) 100%);
            padding: 1rem 0;
            border-bottom: 3px solid var(--art-gold);
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .brand {
            font-family: var(--font-display);
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--art-gold);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            letter-spacing: 2px;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-link {
            color: var(--champagne);
            text-decoration: none;
            font-weight: 400;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            position: relative;
            padding: 0.5rem 1rem;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            width: 0;
            height: 2px;
            background: var(--art-gold);
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }

        .nav-link:hover::after {
            width: 80%;
        }

        .nav-link:hover {
            color: var(--art-gold);
            transform: translateY(-2px);
        }

        /* ===== HERO SECTION - NOIR DRAMA ===== */
        .hero-section {
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.8)), 
                        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 600"><defs><filter id="noise"><feTurbulence baseFrequency="0.9" numOctaves="4" stitchTiles="stitch"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"/></filter></defs><rect width="100%" height="100%" filter="url(%23noise)" opacity="0.4"/></svg>');
            padding: 4rem 0;
            text-align: center;
            position: relative;
        }

        .hero-title {
            font-family: var(--font-display);
            font-size: 4rem;
            font-weight: 900;
            color: var(--art-gold);
            margin-bottom: 1rem;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.9);
            letter-spacing: 3px;
        }

        .hero-subtitle {
            font-size: 1.5rem;
            color: var(--champagne);
            margin-bottom: 2rem;
            font-weight: 300;
            font-style: italic;
        }

        .hero-cta {
            background: linear-gradient(45deg, var(--art-gold), var(--bronze));
            color: var(--noir-black);
            padding: 1rem 2.5rem;
            border: none;
            font-family: var(--font-display);
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .hero-cta::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s ease;
        }

        .hero-cta:hover::before {
            left: 100%;
        }

        .hero-cta:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(212, 175, 55, 0.4);
        }

        /* ===== MAIN CONTENT ===== */
        .main-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .page {
            display: none;
            min-height: calc(100vh - 200px);
            animation: fadeIn 0.5s ease-in-out;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ===== LOGIN & REGISTRATION - NOIR MYSTERY ===== */
        .auth-container {
            max-width: 500px;
            margin: 3rem auto;
            background: linear-gradient(135deg, var(--deep-charcoal) 0%, var(--noir-black) 100%);
            padding: 3rem;
            border-radius: 0;
            position: relative;
        }

        .auth-title {
            font-family: var(--font-display);
            font-size: 2.5rem;
            color: var(--art-gold);
            text-align: center;
            margin-bottom: 2rem;
            font-weight: 700;
        }

        .form-group {
            margin-bottom: 2rem;
            position: relative;
        }

        .form-label {
            display: block;
            color: var(--champagne);
            margin-bottom: 0.5rem;
            font-weight: 400;
            font-size: 1.1rem;
        }

        .form-input {
            width: 100%;
            padding: 1rem;
            background: rgba(54, 69, 79, 0.3);
            border: 2px solid var(--bronze);
            color: var(--ivory);
            font-size: 1rem;
            transition: all 0.3s ease;
            font-family: var(--font-body);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--art-gold);
            background: rgba(54, 69, 79, 0.5);
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.3);
        }

        .form-input::placeholder {
            color: var(--smoke-gray);
            font-style: italic;
        }

        .auth-submit {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(45deg, var(--art-gold), var(--bronze));
            color: var(--noir-black);
            border: none;
            font-family: var(--font-display);
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 1rem;
        }

        .auth-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(212, 175, 55, 0.4);
        }

        .auth-toggle {
            text-align: center;
            margin-top: 2rem;
            color: var(--champagne);
        }

        .auth-toggle a {
            color: var(--art-gold);
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s ease;
        }

        .auth-toggle a:hover {
            color: var(--bronze);
            text-decoration: underline;
        }

        /* ===== BLOG WRITING INTERFACE - FLAPPER ELEGANCE ===== */
        .blog-container {
            max-width: 900px;
            margin: 2rem auto;
            background: linear-gradient(135deg, var(--deep-charcoal) 0%, var(--noir-black) 100%);
            padding: 3rem;
            position: relative;
        }

        .blog-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .blog-title {
            font-family: var(--font-display);
            font-size: 2.5rem;
            color: var(--art-gold);
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .blog-subtitle {
            color: var(--champagne);
            font-size: 1.2rem;
            font-style: italic;
        }

        .blog-editor {
            margin-bottom: 2rem;
        }

        .blog-title-input {
            width: 100%;
            padding: 1.5rem;
            background: rgba(54, 69, 79, 0.3);
            border: 2px solid var(--bronze);
            color: var(--ivory);
            font-size: 1.5rem;
            font-family: var(--font-display);
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .blog-content-input {
            width: 100%;
            min-height: 400px;
            padding: 2rem;
            background: rgba(54, 69, 79, 0.3);
            border: 2px solid var(--bronze);
            color: var(--ivory);
            font-size: 1.1rem;
            line-height: 1.8;
            resize: vertical;
            font-family: var(--font-body);
        }

        .blog-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 2rem;
        }

        .blog-btn {
            padding: 1rem 2rem;
            background: linear-gradient(45deg, var(--art-gold), var(--bronze));
            color: var(--noir-black);
            border: none;
            font-family: var(--font-display);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .blog-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(212, 175, 55, 0.4);
        }

        .blog-btn.secondary {
            background: linear-gradient(45deg, var(--smoke-gray), var(--shadow-blue));
            color: var(--ivory);
        }

        /* ===== AI REWRITER - NOIR TECHNOLOGY ===== */
        .ai-container {
            max-width: 1000px;
            margin: 2rem auto;
            background: linear-gradient(135deg, var(--deep-charcoal) 0%, var(--noir-black) 100%);
            padding: 3rem;
            position: relative;
        }

        .ai-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .ai-title {
            font-family: var(--font-display);
            font-size: 2.5rem;
            color: var(--art-gold);
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .ai-subtitle {
            color: var(--champagne);
            font-size: 1.2rem;
            font-style: italic;
        }

        .ai-input-section {
            margin-bottom: 2rem;
        }

        .ai-input {
            width: 100%;
            min-height: 200px;
            padding: 1.5rem;
            background: rgba(54, 69, 79, 0.3);
            border: 2px solid var(--bronze);
            color: var(--ivory);
            font-size: 1.1rem;
            line-height: 1.6;
            resize: vertical;
        }

        .ai-rewrite-btn {
            display: block;
            margin: 2rem auto;
            padding: 1rem 3rem;
            background: linear-gradient(45deg, var(--art-gold), var(--bronze));
            color: var(--noir-black);
            border: none;
            font-family: var(--font-display);
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .ai-rewrite-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(212, 175, 55, 0.4);
        }

        .ai-rewrite-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .ai-output-section {
            margin-top: 2rem;
        }

        .ai-output {
            width: 100%;
            min-height: 300px;
            padding: 2rem;
            background: rgba(54, 69, 79, 0.3);
            border: 2px solid var(--bronze);
            color: var(--ivory);
            font-size: 1.1rem;
            line-height: 1.6;
            resize: vertical;
        }

        .ai-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 2rem;
        }

        .ai-btn {
            padding: 0.75rem 1.5rem;
            background: linear-gradient(45deg, var(--art-gold), var(--bronze));
            color: var(--noir-black);
            border: none;
            font-family: var(--font-display);
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .ai-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(212, 175, 55, 0.4);
        }

        .ai-btn.secondary {
            background: linear-gradient(45deg, var(--smoke-gray), var(--shadow-blue));
            color: var(--ivory);
        }

        /* ===== ADMIN PANEL - NOIR CONTROL ===== */
        .admin-container {
            max-width: 800px;
            margin: 2rem auto;
            background: linear-gradient(135deg, var(--deep-charcoal) 0%, var(--noir-black) 100%);
            padding: 3rem;
            position: relative;
        }

        .admin-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .admin-title {
            font-family: var(--font-display);
            font-size: 2.5rem;
            color: var(--art-gold);
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .admin-subtitle {
            color: var(--champagne);
            font-size: 1.2rem;
            font-style: italic;
        }

        .api-config-section {
            margin-bottom: 2rem;
        }

        .api-config-title {
            font-family: var(--font-display);
            font-size: 1.5rem;
            color: var(--art-gold);
            margin-bottom: 1.5rem;
            font-weight: 600;
        }

        .api-save-btn {
            display: block;
            margin: 2rem auto;
            padding: 1rem 3rem;
            background: linear-gradient(45deg, var(--art-gold), var(--bronze));
            color: var(--noir-black);
            border: none;
            font-family: var(--font-display);
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .api-save-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(212, 175, 55, 0.4);
        }

        /* ===== BLOG POSTS DISPLAY ===== */
        .blog-posts-container {
            max-width: 1000px;
            margin: 2rem auto;
            padding: 2rem;
        }

        .blog-post {
            background: linear-gradient(135deg, var(--deep-charcoal) 0%, var(--noir-black) 100%);
            padding: 2rem;
            margin-bottom: 2rem;
            border-left: 4px solid var(--art-gold);
            transition: all 0.3s ease;
        }

        .blog-post:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
        }

        .blog-post-title {
            font-family: var(--font-display);
            font-size: 1.8rem;
            color: var(--art-gold);
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .blog-post-meta {
            color: var(--smoke-gray);
            font-size: 0.9rem;
            margin-bottom: 1rem;
            font-style: italic;
        }

        .blog-post-content {
            color: var(--champagne);
            line-height: 1.7;
            margin-bottom: 1.5rem;
        }

        .blog-post-actions {
            display: flex;
            gap: 1rem;
        }

        .blog-post-btn {
            padding: 0.5rem 1rem;
            background: linear-gradient(45deg, var(--smoke-gray), var(--shadow-blue));
            color: var(--ivory);
            border: none;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .blog-post-btn:hover {
            background: linear-gradient(45deg, var(--art-gold), var(--bronze));
            color: var(--noir-black);
        }

        /* ===== ALERTS & MESSAGES ===== */
        .alert {
            padding: 1rem 1.5rem;
            margin-bottom: 1.5rem;
            border-radius: 0;
            font-weight: 500;
            position: relative;
            border-left: 4px solid;
        }

        .alert-success {
            background: rgba(40, 167, 69, 0.1);
            border-color: #28a745;
            color: #28a745;
        }

        .alert-error {
            background: rgba(220, 53, 69, 0.1);
            border-color: #dc3545;
            color: #dc3545;
        }

        .alert-warning {
            background: rgba(255, 193, 7, 0.1);
            border-color: #ffc107;
            color: #ffc107;
        }

        .alert-info {
            background: rgba(23, 162, 184, 0.1);
            border-color: #17a2b8;
            color: #17a2b8;
        }

        /* ===== LOADING STATES ===== */
        .loading {
            opacity: 0.7;
            pointer-events: none;
        }

        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(212, 175, 55, 0.3);
            border-radius: 50%;
            border-top-color: var(--art-gold);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                gap: 1rem;
            }

            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
                gap: 1rem;
            }

            .brand {
                font-size: 2rem;
            }

            .hero-title {
                font-size: 2.5rem;
            }

            .hero-subtitle {
                font-size: 1.2rem;
            }

            .auth-container,
            .blog-container,
            .ai-container,
            .admin-container {
                margin: 1rem;
                padding: 2rem;
            }

            .blog-actions,
            .ai-actions {
                flex-direction: column;
                align-items: center;
            }

            .blog-btn,
            .ai-btn {
                width: 100%;
                max-width: 300px;
            }
        }

        /* ===== UTILITY CLASSES ===== */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .mb-1 { margin-bottom: 1rem; }
        .mb-2 { margin-bottom: 2rem; }
        .mb-3 { margin-bottom: 3rem; }

        .mt-1 { margin-top: 1rem; }
        .mt-2 { margin-top: 2rem; }
        .mt-3 { margin-top: 3rem; }

        /* ===== SCROLLBAR STYLING ===== */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--noir-black);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--bronze);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--art-gold);
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="main-nav">
        <div class="nav-container">
            <div class="brand">
                <i class="fas fa-feather-alt"></i> Opinian
            </div>
            <div class="nav-links">
                <a href="#" class="nav-link" onclick="showPage('home')" id="nav-home">
                    <i class="fas fa-home"></i> Home
                </a>
                <a href="#" class="nav-link hidden" onclick="showPage('write')" id="nav-write">
                    <i class="fas fa-pen-fancy"></i> Write Blog
                </a>
                <a href="#" class="nav-link hidden" onclick="showPage('ai')" id="nav-ai">
                    <i class="fas fa-robot"></i> AI Assistant
                </a>
                <a href="#" class="nav-link hidden" onclick="showPage('admin')" id="nav-admin">
                    <i class="fas fa-user-crown"></i> Admin
                </a>
                <a href="#" class="nav-link" onclick="showPage('login')" id="nav-login">
                    <i class="fas fa-sign-in-alt"></i> Login
                </a>
                <a href="#" class="nav-link hidden" onclick="logout()" id="nav-logout">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </a>
            </div>
        </div>
    </nav>

    <!-- Home Page -->
    <div id="home-page" class="page active">
        <div class="hero-section">
            <div class="main-content">
                <h1 class="hero-title">Where Words Find Their Voice</h1>
                <p class="hero-subtitle">Experience the golden age of storytelling with modern AI assistance</p>
                <button class="hero-cta" onclick="showPage('login')">
                    <i class="fas fa-feather-alt"></i> Begin Your Journey
                </button>
            </div>
        </div>

        <div class="blog-posts-container">
            <h2 style="font-family: var(--font-display); color: var(--art-gold); text-align: center; margin-bottom: 3rem; font-size: 2rem;">
                <i class="fas fa-newspaper"></i> Latest Stories
            </h2>
            <div id="blog-posts-list">
                <!-- Blog posts will be populated here -->
            </div>
        </div>
    </div>

    <!-- Login/Registration Page -->
    <div id="login-page" class="page">
        <div class="auth-container art-deco-border noir-shadow">
            <h2 class="auth-title">
                <i class="fas fa-theater-masks"></i> Welcome to Opinian
            </h2>
            <div id="auth-alert"></div>
            
            <form id="login-form">
                <div class="form-group">
                    <label class="form-label" for="login-username">Username</label>
                    <input type="text" id="login-username" class="form-input" placeholder="Enter your username" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="login-password">Password</label>
                    <input type="password" id="login-password" class="form-input" placeholder="Enter your password" required>
                </div>
                <button type="submit" class="auth-submit">
                    <i class="fas fa-sign-in-alt"></i> Sign In
                </button>
            </form>

            <div class="auth-toggle">
                <p>Don't have an account? <a href="#" onclick="toggleAuthForm()">Register here</a></p>
            </div>

            <form id="register-form" class="hidden">
                <div class="form-group">
                    <label class="form-label" for="register-username">Username</label>
                    <input type="text" id="register-username" class="form-input" placeholder="Choose a username" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="register-email">Email</label>
                    <input type="email" id="register-email" class="form-input" placeholder="Enter your email" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="register-password">Password</label>
                    <input type="password" id="register-password" class="form-input" placeholder="Create a password" required>
                </div>
                <button type="submit" class="auth-submit">
                    <i class="fas fa-user-plus"></i> Create Account
                </button>
            </form>

            <div style="margin-top: 2rem; padding: 1rem; background: rgba(54, 69, 79, 0.3); border-left: 4px solid var(--art-gold);">
                <p style="color: var(--champagne); font-size: 0.9rem; margin-bottom: 0.5rem;"><strong>Demo Accounts:</strong></p>
                <p style="color: var(--smoke-gray); font-size: 0.8rem;">
                    <strong>Admin:</strong> admin / admin123<br>
                    <strong>User:</strong> user / user123
                </p>
            </div>
        </div>
    </div>

    <!-- Blog Writing Page -->
    <div id="write-page" class="page">
        <div class="blog-container art-deco-border noir-shadow">
            <div class="blog-header">
                <h2 class="blog-title">
                    <i class="fas fa-feather-alt"></i> Craft Your Story
                </h2>
                <p class="blog-subtitle">Let your words dance across the page</p>
            </div>
            
            <div id="blog-alert"></div>
            
            <div class="blog-editor">
                <input type="text" id="blog-title-input" class="blog-title-input" placeholder="Enter your blog title..." maxlength="100">
                <textarea id="blog-content-input" class="blog-content-input" placeholder="Begin writing your masterpiece here...

Remember the golden rules of storytelling:
• Hook your readers from the first line
• Paint vivid pictures with your words
• Let your authentic voice shine through
• End with impact that resonates"></textarea>
            </div>
            
            <div class="blog-actions">
                <button class="blog-btn" onclick="saveBlog()">
                    <i class="fas fa-save"></i> Save Draft
                </button>
                <button class="blog-btn" onclick="publishBlog()">
                    <i class="fas fa-paper-plane"></i> Publish Story
                </button>
                <button class="blog-btn secondary" onclick="clearBlog()">
                    <i class="fas fa-trash"></i> Clear
                </button>
            </div>
        </div>
    </div>

    <!-- AI Assistant Page -->
    <div id="ai-page" class="page">
        <div class="ai-container art-deco-border noir-shadow">
            <div class="ai-header">
                <h2 class="ai-title">
                    <i class="fas fa-robot"></i> AI Story Enhancer
                </h2>
                <p class="ai-subtitle">Transform your ideas into captivating narratives</p>
            </div>
            
            <div id="ai-alert"></div>
            
            <div class="ai-input-section">
                <label class="form-label" for="ai-input">Your Story Ideas or Rough Draft</label>
                <textarea id="ai-input" class="ai-input" placeholder="Share your story ideas, rough drafts, or key points here. Our AI will help you craft them into compelling narratives.

Example:
• A detective story set in 1940s Chicago
• A romance between a flapper and a jazz musician  
• A mystery involving a speakeasy and forbidden love

The more details you provide, the better the AI can assist you!"></textarea>
            </div>
            
            <button id="ai-rewrite-btn" class="ai-rewrite-btn" onclick="rewriteWithAI()">
                <i class="fas fa-magic"></i> Enhance My Story
            </button>
            
            <div class="ai-output-section">
                <label class="form-label" for="ai-output">AI-Enhanced Story</label>
                <textarea id="ai-output" class="ai-output" placeholder="Your enhanced story will appear here...

The AI will:
• Improve your writing style
• Add descriptive language
• Structure your narrative
• Enhance engagement
• Maintain your unique voice"></textarea>
                
                <div class="ai-actions">
                    <button class="ai-btn" onclick="exportToBlog()">
                        <i class="fas fa-file-export"></i> Export to Blog
                    </button>
                    <button class="ai-btn secondary" onclick="exportToWord()">
                        <i class="fas fa-file-word"></i> Export as Word
                    </button>
                    <button class="ai-btn secondary" onclick="exportToText()">
                        <i class="fas fa-file-alt"></i> Export as Text
                    </button>
                    <button class="ai-btn secondary" onclick="copyToClipboard()">
                        <i class="fas fa-copy"></i> Copy to Clipboard
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Panel Page -->
    <div id="admin-page" class="page">
        <div class="admin-container art-deco-border noir-shadow">
            <div class="admin-header">
                <h2 class="admin-title">
                    <i class="fas fa-user-crown"></i> Control Room
                </h2>
                <p class="admin-subtitle">Configure your AI assistant and manage the platform</p>
            </div>
            
            <div id="admin-alert"></div>
            
            <div class="api-config-section">
                <h3 class="api-config-title">
                    <i class="fas fa-key"></i> AI Service Configuration
                </h3>
                <p style="color: var(--champagne); margin-bottom: 1.5rem; font-size: 0.9rem;">
                    Enter your API credentials to enable AI-powered story enhancement. 
                    <strong style="color: var(--art-gold);">Note:</strong> This is a demo interface. In production, these would connect to actual AI services.
                </p>
                
                <div class="form-group">
                    <label class="form-label" for="openai-api-key">OpenAI API Key</label>
                    <input type="password" id="openai-api-key" class="form-input" placeholder="sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="anthropic-api-key">Anthropic API Key</label>
                    <input type="password" id="anthropic-api-key" class="form-input" placeholder="sk-ant-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="huggingface-api-key">Hugging Face API Key</label>
                    <input type="password" id="huggingface-api-key" class="form-input" placeholder="hf_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="ai-model-preference">Preferred AI Model</label>
                    <select id="ai-model-preference" class="form-input">
                        <option value="gpt-4">GPT-4 (OpenAI)</option>
                        <option value="gpt-3.5-turbo">GPT-3.5 Turbo (OpenAI)</option>
                        <option value="claude-3-sonnet">Claude 3 Sonnet (Anthropic)</option>
                        <option value="claude-3-haiku">Claude 3 Haiku (Anthropic)</option>
                        <option value="llama-2">LLaMA 2 (Meta)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="ai-temperature">Creativity Level (Temperature)</label>
                    <input type="range" id="ai-temperature" min="0" max="1" step="0.1" value="0.7" class="form-input">
                    <div style="display: flex; justify-content: space-between; color: var(--smoke-gray); font-size: 0.8rem; margin-top: 0.5rem;">
                        <span>Conservative</span>
                        <span id="temperature-value">0.7</span>
                        <span>Creative</span>
                    </div>
                </div>
            </div>
            
            <button class="api-save-btn" onclick="saveAPIConfig()">
                <i class="fas fa-save"></i> Save Configuration
            </button>
            
            <div style="margin-top: 3rem; padding: 2rem; background: rgba(54, 69, 79, 0.3); border-left: 4px solid var(--art-gold);">
                <h4 style="color: var(--art-gold); margin-bottom: 1rem; font-family: var(--font-display);">
                    <i class="fas fa-info-circle"></i> Platform Statistics
                </h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                    <div style="text-align: center;">
                        <div style="font-size: 2rem; color: var(--art-gold); font-weight: 700;" id="total-users">0</div>
                        <div style="color: var(--champagne); font-size: 0.9rem;">Total Users</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 2rem; color: var(--art-gold); font-weight: 700;" id="total-blogs">0</div>
                        <div style="color: var(--champagne); font-size: 0.9rem;">Published Stories</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 2rem; color: var(--art-gold); font-weight: 700;" id="ai-usage">0</div>
                        <div style="color: var(--champagne); font-size: 0.9rem;">AI Enhancements</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer style="background: var(--noir-black); padding: 2rem 0; text-align: center; border-top: 2px solid var(--art-gold); margin-top: 4rem;">
        <div class="main-content">
            <p style="color: var(--smoke-gray); font-size: 0.9rem; margin-bottom: 0.5rem;">
                <i class="fas fa-feather-alt"></i> Opinian - Where Every Story Matters
            </p>
            <p style="color: var(--smoke-gray); font-size: 0.8rem; font-style: italic;">
                "In the golden age of words, we find our voice"
            </p>
        </div>
    </footer>

    <script>
        // ===== GLOBAL VARIABLES & CONFIGURATION =====
        let currentUser = null;
        let users = [];
        let blogPosts = [];
        let apiConfig = {
            openaiKey: '',
            anthropicKey: '',
            huggingfaceKey: '',
            preferredModel: 'gpt-4',
            temperature: 0.7
        };

        // Demo data for initialization
        const demoUsers = [
            {
                id: 1,
                username: 'admin',
                email: 'admin@opinian.com',
                password: 'admin123',
                isAdmin: true,
                createdAt: new Date('2024-01-01')
            },
            {
                id: 2,
                username: 'user',
                email: 'user@opinian.com', 
                password: 'user123',
                isAdmin: false,
                createdAt: new Date('2024-01-02')
            }
        ];

        const demoBlogPosts = [
            {
                id: 1,
                title: "The Jazz Age Chronicles: A Night at the Speakeasy",
                content: "The year was 1925, and the air was thick with cigarette smoke and the sweet sounds of jazz. Sarah adjusted her feathered headband and stepped into the dimly lit speakeasy, her beaded dress catching the golden light from the chandeliers above. The password had been 'butterscotch' - a detail she wouldn't soon forget.",
                author: "admin",
                createdAt: new Date('2024-01-15'),
                isPublished: true
            },
            {
                id: 2,
                title: "Midnight in Chicago: A Detective's Tale",
                content: "The rain fell in sheets as Detective Murphy lit his fifth cigarette of the night. The dame in the red dress had promised him answers, but all he'd gotten so far was a headache and an empty wallet. This city had a way of chewing people up and spitting them out, and tonight, he was feeling particularly chewed.",
                author: "user",
                createdAt: new Date('2024-01-20'),
                isPublished: true
            }
        ];

        // ===== INITIALIZATION =====
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize demo data
            users = [...demoUsers];
            blogPosts = [...demoBlogPosts];
            
            // Load saved data from localStorage
            loadFromLocalStorage();
            
            // Update UI
            updateNavigation();
            displayBlogPosts();
            updateAdminStats();
            
            // Initialize temperature slider
            const tempSlider = document.getElementById('ai-temperature');
            const tempValue = document.getElementById('temperature-value');
            
            tempSlider.addEventListener('input', function() {
                tempValue.textContent = this.value;
                apiConfig.temperature = parseFloat(this.value);
            });
            
            // Add enter key support for login
            document.getElementById('login-form').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    login();
                }
            });
            
            console.log('Opinian platform initialized successfully');
        });

        // ===== AUTHENTICATION FUNCTIONS =====
        function login() {
            const username = document.getElementById('login-username').value.trim();
            const password = document.getElementById('login-password').value.trim();
            
            if (!username || !password) {
                showAlert('auth-alert', 'Please enter both username and password', 'error');
                return;
            }
            
            const user = users.find(u => u.username === username && u.password === password);
            
            if (user) {
                currentUser = user;
                updateNavigation();
                showPage('home');
                showAlert('auth-alert', `Welcome back, ${user.username}!`, 'success');
                
                // Clear form
                document.getElementById('login-form').reset();
                
                // Update displays
                displayBlogPosts();
                updateAdminStats();
            } else {
                showAlert('auth-alert', 'Invalid username or password', 'error');
            }
        }

        function register() {
            const username = document.getElementById('register-username').value.trim();
            const email = document.getElementById('register-email').value.trim();
            const password = document.getElementById('register-password').value.trim();
            
            // Validation
            if (!username || !email || !password) {
                showAlert('auth-alert', 'Please fill in all fields', 'error');
                return;
            }
            
            if (username.length < 3) {
                showAlert('auth-alert', 'Username must be at least 3 characters long', 'error');
                return;
            }
            
            if (password.length < 6) {
                showAlert('auth-alert', 'Password must be at least 6 characters long', 'error');
                return;
            }
            
            if (!email.includes('@')) {
                showAlert('auth-alert', 'Please enter a valid email address', 'error');
                return;
            }
            
            // Check if user already exists
            if (users.some(u => u.username === username || u.email === email)) {
                showAlert('auth-alert', 'Username or email already exists', 'error');
                return;
            }
            
            // Create new user
            const newUser = {
                id: Math.max(...users.map(u => u.id), 0) + 1,
                username,
                email,
                password,
                isAdmin: false,
                createdAt: new Date()
            };
            
            users.push(newUser);
            saveToLocalStorage();
            
            // Auto-login after registration
            currentUser = newUser;
            updateNavigation();
            showPage('home');
            showAlert('auth-alert', `Welcome to Opinian, ${username}! Your account has been created.`, 'success');
            
            // Clear form and toggle back to login
            document.getElementById('register-form').reset();
            toggleAuthForm();
        }

        function logout() {
            currentUser = null;
            updateNavigation();
            showPage('home');
            displayBlogPosts();
        }

        function toggleAuthForm() {
            const loginForm = document.getElementById('login-form');
            const registerForm = document.getElementById('register-form');
            const authToggle = document.querySelector('.auth-toggle');
            
            if (loginForm.classList.contains('hidden')) {
                loginForm.classList.remove('hidden');
                registerForm.classList.add('hidden');
                authToggle.innerHTML = '<p>Don\'t have an account? <a href="#" onclick="toggleAuthForm()">Register here</a></p>';
            } else {
                loginForm.classList.add('hidden');
                registerForm.classList.remove('hidden');
                authToggle.innerHTML = '<p>Already have an account? <a href="#" onclick="toggleAuthForm()">Login here</a></p>';
            }
            
            // Clear alerts
            document.getElementById('auth-alert').innerHTML = '';
        }

        // ===== NAVIGATION FUNCTIONS =====
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId + '-page').classList.add('active');
            
            // Update navigation active state
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            const activeNav = document.getElementById('nav-' + pageId);
            if (activeNav) {
                activeNav.classList.add('active');
            }
            
            // Page-specific updates
            if (pageId === 'admin') {
                updateAdminStats();
            }
        }

        function updateNavigation() {
            const navLinks = document.querySelectorAll('.nav-link');
            
            if (currentUser) {
                // Show logged-in navigation
                document.getElementById('nav-login').classList.add('hidden');
                document.getElementById('nav-logout').classList.remove('hidden');
                document.getElementById('nav-write').classList.remove('hidden');
                document.getElementById('nav-ai').classList.remove('hidden');
                
                // Show admin features if user is admin
                if (currentUser.isAdmin) {
                    document.getElementById('nav-admin').classList.remove('hidden');
                } else {
                    document.getElementById('nav-admin').classList.add('hidden');
                }
            } else {
                // Show logged-out navigation
                document.getElementById('nav-login').classList.remove('hidden');
                document.getElementById('nav-logout').classList.add('hidden');
                document.getElementById('nav-write').classList.add('hidden');
                document.getElementById('nav-ai').classList.add('hidden');
                document.getElementById('nav-admin').classList.add('hidden');
            }
        }

        // ===== BLOG FUNCTIONS =====
        function saveBlog() {
            const title = document.getElementById('blog-title-input').value.trim();
            const content = document.getElementById('blog-content-input').value.trim();
            
            if (!title && !content) {
                showAlert('blog-alert', 'Please enter a title or content to save', 'warning');
                return;
            }
            
            if (!currentUser) {
                showAlert('blog-alert', 'Please login to save your blog', 'error');
                return;
            }
            
            // Create draft blog post
            const draftPost = {
                id: Math.max(...blogPosts.map(b => b.id), 0) + 1,
                title: title || 'Untitled Draft',
                content: content || '',
                author: currentUser.username,
                createdAt: new Date(),
                isPublished: false
            };
            
            blogPosts.push(draftPost);
            saveToLocalStorage();
            
            showAlert('blog-alert', 'Blog draft saved successfully!', 'success');
        }

        function publishBlog() {
            const title = document.getElementById('blog-title-input').value.trim();
            const content = document.getElementById('blog-content-input').value.trim();
            
            if (!title || !content) {
                showAlert('blog-alert', 'Please enter both title and content to publish', 'error');
                return;
            }
            
            if (!currentUser) {
                showAlert('blog-alert', 'Please login to publish your blog', 'error');
                return;
            }
            
            // Create published blog post
            const publishedPost = {
                id: Math.max(...blogPosts.map(b => b.id), 0) + 1,
                title,
                content,
                author: currentUser.username,
                createdAt: new Date(),
                isPublished: true
            };
            
            blogPosts.push(publishedPost);
            saveToLocalStorage();
            
            // Clear form
            clearBlog();
            
            // Update displays
            displayBlogPosts();
            updateAdminStats();
            
            showAlert('blog-alert', 'Blog published successfully!', 'success');
            showPage('home');
        }

        function clearBlog() {
            document.getElementById('blog-title-input').value = '';
            document.getElementById('blog-content-input').value = '';
            showAlert('blog-alert', 'Blog form cleared', 'info');
        }

        function displayBlogPosts() {
            const container = document.getElementById('blog-posts-list');
            const publishedPosts = blogPosts.filter(post => post.isPublished);
            
            if (publishedPosts.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 3rem; color: var(--smoke-gray);">
                        <i class="fas fa-feather-alt" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                        <h3>No stories published yet</h3>
                        <p>Be the first to share your voice with the world!</p>
                        ${currentUser ? '<button class="blog-btn" onclick="showPage(\'write\')">Write Your First Story</button>' : '<button class="blog-btn" onclick="showPage(\'login\')">Login to Write</button>'}
                    </div>
                `;
                return;
            }
            
            container.innerHTML = publishedPosts.map(post => `
                <div class="blog-post">
                    <h3 class="blog-post-title">${escapeHtml(post.title)}</h3>
                    <div class="blog-post-meta">
                        By ${escapeHtml(post.author)} • ${formatDate(post.createdAt)}
                    </div>
                    <div class="blog-post-content">
                        ${escapeHtml(truncateText(post.content, 300))}
                    </div>
                    <div class="blog-post-actions">
                        <button class="blog-post-btn" onclick="readFullPost(${post.id})">
                            <i class="fas fa-book-open"></i> Read Full Story
                        </button>
                        ${currentUser && currentUser.username === post.author ? `
                            <button class="blog-post-btn" onclick="editPost(${post.id})">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="blog-post-btn" onclick="deletePost(${post.id})">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        ` : ''}
                    </div>
                </div>
            `).join('');
        }

        // ===== AI FUNCTIONS =====
        function rewriteWithAI() {
            const input = document.getElementById('ai-input').value.trim();
            const output = document.getElementById('ai-output');
            const button = document.getElementById('ai-rewrite-btn');
            
            if (!input) {
                showAlert('ai-alert', 'Please enter some text for the AI to enhance', 'warning');
                return;
            }
            
            // Check if API is configured (demo check)
            if (!apiConfig.openaiKey && !apiConfig.anthropicKey) {
                showAlert('ai-alert', 'AI services not configured. Please contact your administrator.', 'warning');
                return;
            }
            
            // Show loading state
            button.disabled = true;
            button.innerHTML = '<span class="spinner"></span> Enhancing your story...';
            
            // Simulate AI processing (in real implementation, this would call actual AI API)
            setTimeout(() => {
                const enhancedText = simulateAIEnhancement(input);
                output.value = enhancedText;
                
                // Reset button
                button.disabled = false;
                button.innerHTML = '<i class="fas fa-magic"></i> Enhance My Story';
                
                showAlert('ai-alert', 'Story enhanced successfully! You can now export it in various formats.', 'success');
                
                // Update AI usage stats
                updateAIUsageStats();
            }, 2000);
        }

        function simulateAIEnhancement(text) {
            // This is a simulation - in production, this would call actual AI services
            const enhancements = [
                `The amber glow of the street lamps cast long shadows across the wet cobblestones, creating an atmosphere thick with mystery and longing.`,
                `Her silk dress whispered secrets as she moved through the smoky jazz club, each step a symphony of elegance and rebellion.`,
                `The detective's fedora cast a shadow over his eyes, but nothing could hide the truth that burned in his soul like a cigarette in the dark.`,
                `In the golden age of dreams and desperation, every story had the power to change the world—or destroy it completely.`
            ];
            
            const randomEnhancement = enhancements[Math.floor(Math.random() * enhancements.length)];
            
            return `Enhanced by AI Assistant:

${text}

--- Enhanced Version ---

${randomEnhancement}

${text}

The narrative continues with the rich tapestry of human emotion, woven through with threads of hope and despair that defined an era. Each word carries the weight of history, each sentence a testament to the power of storytelling in its most pure and evocative form.

In this world of shadows and light, where truth and fiction dance an eternal waltz, your story finds its voice—a voice that echoes through the corridors of time, speaking to hearts that beat with the same rhythm of longing and love that has always defined the human condition.`;
        }

        // ===== EXPORT FUNCTIONS =====
        function exportToBlog() {
            const content = document.getElementById('ai-output').value.trim();
            
            if (!content) {
                showAlert('ai-alert', 'No content to export. Please generate AI-enhanced text first.', 'warning');
                return;
            }
            
            if (!currentUser) {
                showAlert('ai-alert', 'Please login to export to blog.', 'error');
                return;
            }
            
            // Pre-fill blog writing form
            document.getElementById('blog-title-input').value = 'AI-Enhanced Story';
            document.getElementById('blog-content-input').value = content;
            
            showPage('write');
            showAlert('blog-alert', 'Content exported to blog editor!', 'success');
        }

        function exportToWord() {
            const content = document.getElementById('ai-output').value.trim();
            
            if (!content) {
                showAlert('ai-alert', 'No content to export. Please generate AI-enhanced text first.', 'warning');
                return;
            }
            
            try {
                // Create Word document
                const doc = new docx.Document({
                    sections: [{
                        properties: {},
                        children: [
                            new docx.Paragraph({
                                text: "AI-Enhanced Story from Opinian",
                                heading: docx.HeadingLevel.HEADING_1,
                                alignment: docx.AlignmentType.CENTER
                            }),
                            new docx.Paragraph({
                                text: "Generated on: " + new Date().toLocaleDateString(),
                                alignment: docx.AlignmentType.CENTER
                            }),
                            new docx.Paragraph({
                                text: "",
                            }),
                            new docx.Paragraph({
                                text: content,
                                alignment: docx.AlignmentType.LEFT
                            })
                        ]
                    }]
                });
                
                // Generate and download
                docx.Packer.toBlob(doc).then(blob => {
                    saveAs(blob, "opinian-ai-enhanced-story.docx");
                    showAlert('ai-alert', 'Word document exported successfully!', 'success');
                });
            } catch (error) {
                console.error('Error exporting to Word:', error);
                showAlert('ai-alert', 'Error exporting to Word. Please try another format.', 'error');
            }
        }

        function exportToText() {
            const content = document.getElementById('ai-output').value.trim();
            
            if (!content) {
                showAlert('ai-alert', 'No content to export. Please generate AI-enhanced text first.', 'warning');
                return;
            }
            
            const textContent = `AI-Enhanced Story from Opinian
Generated on: ${new Date().toLocaleDateString()}

${content}`;
            
            const blob = new Blob([textContent], { type: 'text/plain' });
            saveAs(blob, "opinian-ai-enhanced-story.txt");
            
            showAlert('ai-alert', 'Text file exported successfully!', 'success');
        }

        function copyToClipboard() {
            const content = document.getElementById('ai-output').value.trim();
            
            if (!content) {
                showAlert('ai-alert', 'No content to copy. Please generate AI-enhanced text first.', 'warning');
                return;
            }
            
            navigator.clipboard.writeText(content).then(() => {
                showAlert('ai-alert', 'Content copied to clipboard!', 'success');
            }).catch(() => {
                showAlert('ai-alert', 'Failed to copy to clipboard. Please copy manually.', 'error');
            });
        }

        // ===== ADMIN FUNCTIONS =====
        function saveAPIConfig() {
            const openaiKey = document.getElementById('openai-api-key').value.trim();
            const anthropicKey = document.getElementById('anthropic-api-key').value.trim();
            const huggingfaceKey = document.getElementById('huggingface-api-key').value.trim();
            const preferredModel = document.getElementById('ai-model-preference').value;
            const temperature = parseFloat(document.getElementById('ai-temperature').value);
            
            // Update configuration
            apiConfig = {
                openaiKey,
                anthropicKey,
                huggingfaceKey,
                preferredModel,
                temperature
            };
            
            saveToLocalStorage();
            showAlert('admin-alert', 'API configuration saved successfully!', 'success');
        }

        function updateAdminStats() {
            if (!currentUser || !currentUser.isAdmin) return;
            
            document.getElementById('total-users').textContent = users.length;
            document.getElementById('total-blogs').textContent = blogPosts.filter(b => b.isPublished).length;
            document.getElementById('ai-usage').textContent = localStorage.getItem('aiUsageCount') || '0';
        }

        function updateAIUsageStats() {
            const currentCount = parseInt(localStorage.getItem('aiUsageCount') || '0');
            localStorage.setItem('aiUsageCount', (currentCount + 1).toString());
            updateAdminStats();
        }

        // ===== UTILITY FUNCTIONS =====
        function showAlert(elementId, message, type = 'info') {
            const alertDiv = document.getElementById(elementId);
            alertDiv.innerHTML = `<div class="alert alert-${type}">${message}</div>`;
            
            // Auto-hide after 5 seconds
            setTimeout(() => {
                alertDiv.innerHTML = '';
            }, 5000);
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function truncateText(text, maxLength) {
            if (text.length <= maxLength) return text;
            return text.substr(0, maxLength) + '...';
        }

        function formatDate(date) {
            return new Date(date).toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        }

        function readFullPost(postId) {
            const post = blogPosts.find(p => p.id === postId);
            if (post) {
                alert(`Full post view would open here for:\n\n"${post.title}"\n\nIn a full implementation, this would open a dedicated blog post page.`);
            }
        }

        function editPost(postId) {
            const post = blogPosts.find(p => p.id === postId);
            if (post && currentUser && currentUser.username === post.author) {
                document.getElementById('blog-title-input').value = post.title;
                document.getElementById('blog-content-input').value = post.content;
                showPage('write');
                showAlert('blog-alert', 'Blog loaded for editing', 'info');
            }
        }

        function deletePost(postId) {
            if (confirm('Are you sure you want to delete this blog post?')) {
                const postIndex = blogPosts.findIndex(p => p.id === postId);
                if (postIndex !== -1) {
                    const post = blogPosts[postIndex];
                    if (currentUser && currentUser.username === post.author) {
                        blogPosts.splice(postIndex, 1);
                        saveToLocalStorage();
                        displayBlogPosts();
                        updateAdminStats();
                        showAlert('blog-alert', 'Blog post deleted successfully', 'success');
                    }
                }
            }
        }

        // ===== LOCAL STORAGE FUNCTIONS =====
        function saveToLocalStorage() {
            try {
                localStorage.setItem('opinianUsers', JSON.stringify(users));
                localStorage.setItem('opinianBlogPosts', JSON.stringify(blogPosts));
                localStorage.setItem('opinianAPIConfig', JSON.stringify(apiConfig));
            } catch (error) {
                console.error('Error saving to localStorage:', error);
            }
        }

        function loadFromLocalStorage() {
            try {
                const savedUsers = localStorage.getItem('opinianUsers');
                const savedBlogPosts = localStorage.getItem('opinianBlogPosts');
                const savedAPIConfig = localStorage.getItem('opinianAPIConfig');
                
                if (savedUsers) {
                    users = JSON.parse(savedUsers);
                }
                
                if (savedBlogPosts) {
                    blogPosts = JSON.parse(savedBlogPosts);
                    // Convert date strings back to Date objects
                    blogPosts.forEach(post => {
                        post.createdAt = new Date(post.createdAt);
                    });
                }
                
                if (savedAPIConfig) {
                    apiConfig = JSON.parse(savedAPIConfig);
                    // Update form values
                    document.getElementById('openai-api-key').value = apiConfig.openaiKey || '';
                    document.getElementById('anthropic-api-key').value = apiConfig.anthropicKey || '';
                    document.getElementById('huggingface-api-key').value = apiConfig.huggingfaceKey || '';
                    document.getElementById('ai-model-preference').value = apiConfig.preferredModel || 'gpt-4';
                    document.getElementById('ai-temperature').value = apiConfig.temperature || 0.7;
                    document.getElementById('temperature-value').textContent = apiConfig.temperature || 0.7;
                }
            } catch (error) {
                console.error('Error loading from localStorage:', error);
            }
        }

        // ===== EVENT LISTENERS =====
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            login();
        });

        document.getElementById('register-form').addEventListener('submit', function(e) {
            e.preventDefault();
            register();
        });

        // Add smooth scrolling for better UX
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('nav-link')) {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        });

        // Handle page visibility changes
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                saveToLocalStorage();
            }
        });

        // Save data before page unload
        window.addEventListener('beforeunload', function() {
            saveToLocalStorage();
        });

        console.log('Opinian blogging platform fully loaded and ready for use');
    </script>
</body>
</html>